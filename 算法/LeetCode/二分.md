# 中等

## [611. 有效三角形的个数](https://leetcode.cn/problems/valid-triangle-number/)

> 给定一个包含非负整数的数组 `nums` ，返回其中可以组成三角形三条边的三元组个数。
>
>  
>
> **示例 1:**
>
> ```
> 输入: nums = [2,2,3,4]
> 输出: 3
> 解释:有效的组合是: 
> 2,3,4 (使用第一个 2)
> 2,3,4 (使用第二个 2)
> 2,2,3
> ```
>
> **示例 2:**
>
> ```
> 输入: nums = [4,2,3,4]
> 输出: 4
> ```
>
>  
>
> **提示:**
>
> - `1 <= nums.length <= 1000`
> - `0 <= nums[i] <= 1000`

两层`for`循环枚举最小的两个数，再通过二分查找确定满足三角形条件的边界值。但这题的最优解是双指针。

```C++
int triangleNumber(vector<int>& nums) {
    if (nums.size() < 2)
        return 0;
    sort(nums.begin(), nums.end());
    int ans = 0;
    for (int i = 0; i < nums.size() - 2; ++i) {
        // 跳过为零的数
        if (nums[i] == 0)
            continue;
        for (int j = i + 1; j < nums.size() - 1; ++j) {
            int sum = nums[i] + nums[j];
            // 找到小于两数之和，最右边的边界值
            int p = lower_bound(nums.begin(), nums.end(), sum) - nums.begin() - 1;
            // (j + 1, p)都是可以构成三角形的值
            ans += p - j;
        }   
    }
    return ans;
}
```


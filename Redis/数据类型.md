| 数据类型 | 内部编码   |
| ---- | ---- |
| **string** | raw <br>int <br>embstr |
| **hash** | hashtable <br>ziplist |
| **list** | linkedlist <br>ziplist |
| **set** | hashtable <br>intset |
| **zset** | skiplist <br>ziplist |

# 字符串（String）

- **特点**：Redis 最基础的数据类型，一个键对应一个值，值可以是字符串、整数或者浮点数。
- **应用场景**：缓存、计数器、分布式锁等。
- **编码形式**：
  - **int**：当存储的字符串可以被解释为 64 位有符号整数时，使用 `int` 编码。例如，存储数字 `123` 时会采用此编码。
  - **embstr**：用于存储长度较短的字符串。`embstr` 编码是一种优化的内存分配方式，它将 Redis 对象头和字符串数据存储在连续的内存块中，减少了内存碎片，提高了内存使用效率。
  - **raw**：当存储的字符串长度较长时，使用 `raw` 编码。此时，字符串数据存储在单独分配的内存块中。

# 哈希（Hash）

- **特点**：键值对的集合，适合存储对象。每个哈希可以存储多个键值对，类似于 Python 中的字典。
- **应用场景**：存储用户信息、配置信息等。
- **编码形式**：
  - **hashtable**：当哈希表中的键值对数量较多，或者键和值的长度较长时，会使用 `hashtable` 编码。`hashtable` 是一个标准的哈希表实现，使用数组和链表来处理哈希冲突。
  - **ziplist**：当哈希表中的键值对数量较少，且键和值的长度都较短时使用。`ziplist` 是一种紧凑的、连续的内存数据结构，它将所有的键值对依次存储在一块连续的内存中，通过偏移量来访问不同的元素。
  

# 列表（List）

- **特点**：按照插入顺序排序的字符串元素集合，支持从列表的两端插入和弹出元素。
- **应用场景**：消息队列、最新消息列表等。
- **编码形式**：
  - **linkedlist**：早期 Redis 中，当列表元素较多或元素长度较长时使用 `linkedlist` 编码，它是一个双向链表结构，便于在列表两端进行插入和删除操作。
  - **ziplist**：同上。

# 集合（Set）

- **特点**：无序且唯一的字符串元素集合，支持集合的交集、并集、差集等操作。
- **应用场景**：去重、共同好友、抽奖等。
- **编码形式**：
  - **hashtable**：同上。
  - **intset**：当集合中的元素都是整数，且元素数量较少时，使用 `intset` 编码。`intset` 是一个有序的整数数组，它可以根据元素的大小动态调整数组的编码方式（如 16 位、32 位或 64 位整数），以节省内存。


# 有序集合（Sorted Set）

- **特点**：与集合类似，但每个元素都关联了一个分数（score），根据分数对元素进行排序。
- **应用场景**：排行榜、热门列表等。
- **编码形式**：
  - **skiplist**：用于存储大规模的有序集合。**跳表**结构可以保证在处理大量元素时仍能保持较高的操作效率。
  - **ziplist**：同上。


**查看指定键所对应值的编码类型**

```bash
object encoding key
```

```
127.0.0.1:6379> set key1 123
OK
127.0.0.1:6379> set key2 hello
OK
127.0.0.1:6379> set key3 helloooooooooooooooooooooooooooooooooooooooooooooo
OK
127.0.0.1:6379> object encoding key1
"int"
127.0.0.1:6379> object encoding key2
"embstr"
127.0.0.1:6379> object encoding key3
"raw"
```


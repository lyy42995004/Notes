# 常用命令

## 设置和读取

### SET

```
set key value [EX seconds] [PX milliseconds] [NX|XX]
```

- 将键 `key` 的值设置为 `value`。若键已存在，其值会被新值覆盖；若不存在，则创建新键值对。
- **参数说明**：
  - `EX seconds`：设置键的过期时间，单位为秒。
  - `PX milliseconds`：设置键的过期时间，单位为毫秒。
  - `NX`：仅在键不存在时进行设置。
  - `XX`：仅在键已存在时进行更新。

### GET

```
get key
```

- 获取键 `key` 对应`value`的值。若键不存在，返回 `nil`。

### MSET

```
mset key value [key value ...]
```

- 一次性设置多个键值对。

### **MGET**

```
mget key [key ...]
```

- 一次性获取多个键的值。若某个键不存在，对应位置返回 `nil`。

## 数字操作

### INCR

```
incr key
```

- 将键 `key` 对应的值（需为整数）递增 1。若键不存在，会先将其值初始化为 0，再进行递增操作。

### INCRBY

```
incrby key increment
```

- 将键 `key` 对应的值（需为整数）增加指定的 `increment` 值。若键不存在，会先将其值初始化为 0，再进行增加操作。

### DECR

```
decr key
```

- 将键 `key` 对应的值（需为整数）递减 1。若键不存在，会先将其值初始化为 0，再进行递减操作。

### DECRBY

```
decrby key increment
```

- 将键 `key` 对应的值（需为整数）减少指定的 `decrement` 值。若键不存在，会先将其值初始化为 0，再进行减少操作。

### INCRBYFLOAT

```
incrbyfloat key increment
```

- 将键 `key` 对应的值（可以是整数或浮点数）增加指定的 `increment` 值。若键不存在，会先将其值初始化为 0，再进行增加操作。

## 字符串操作

### APPEND

```
append key value
```

- 将 `value` 追加到键 `key` 对应字符串的末尾。若键不存在，会先创建该键并将其值设置为 `value`。

### STRLEN

```
strlen key
```

- 返回键 `key` 对应字符串的长度。若键不存在，返回 0。]

### GETRANGE

```
getrange key start end
```

- 返回键 `key` 对应字符串中从 `start` 到 `end` 位置的子字符串。索引从 0 开始，支持负数索引，-1 表示最后一个字符。

```
127.0.0.1:6379> set key helloredis
OK
127.0.0.1:6379> getrange key 0 5
"hellor"
127.0.0.1:6379> getrange key 0 -1
"helloredis"
```

### SETRANGE

```
setrange key offset value
```

- 从键 `key` 对应字符串的 `offset` 位置开始，用 `value` 覆盖原字符串的相应部分。若 `offset` 超出原字符串长度，会在中间填充空字符 `\x00`。

# 内部编码

**int 编码**：当字符串的值能解析为 64 位有符号整数时，Redis 会采用 int 编码，用 8 字节来存储这个整数值。

**embstr 编码**：用于存储长度小于或等于 39 字节的字符串。embstr 编码将字符串对象的结构和实际字符串数据存放在一起，借助简单动态字符串（SDS）结构来管理字符串长度等信息。创建时只需一次内存分配，在内存中是一块连续的区域。

**raw 编码**：用于存储长度大于 39 字节的字符串。raw 编码需要两次内存分配，一次用于存储字符串对象的基本信息（如长度等），另一次用于存储实际的字符串数据，字符串对象和字符串数据分开存储。****

# 使用场景

**缓存数据**：把数据库查询结果中的对象（如用户信息、商品信息等）序列化为字符串后存储在 Redis 中。以对象的唯一标识（如用户 ID、商品 ID）作为键，序列化后的字符串作为值。这样可以避免频繁查询数据库，提升系统性能。

**计数器**：例如记录用户的登录次数、文章的阅读量、点赞数等。以用户 ID 或文章 ID 作为键，使用`INCR`命令每次用户登录或文章被阅读、点赞时对相应的键进行加 1 操作。

**共享会话**（Session）：Redis 常被用于存储和管理会话数据，以实现多个服务器之间的会话共享，提高系统的可扩展性和可靠性。